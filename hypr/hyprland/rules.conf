# ######## Window rules ########
# 作用：设置匹配窗口透明度；条件：match:fullscreen false
windowrule = opacity $windowOpacity override, match:fullscreen false

# 作用：强制匹配窗口不透明，避免双重透明导致发灰；条件：match:class foot|equibop|org\.quickshell|imv|swappy
windowrule = opaque true, match:class foot|equibop|org\.quickshell|imv|swappy  # They use native transparency or we want them opaque
# 作用：让匹配窗口创建后居中；条件：match:float true, match:xwayland false
windowrule = center true, match:float true, match:xwayland false  # Center all floating windows (not xwayland cause popups)

# Float
# 作用：让匹配窗口以浮动模式打开；条件：match:class guifetch
windowrule = float true, match:class guifetch  # FlafyDev/guifetch
# 作用：让匹配窗口以浮动模式打开；条件：match:class yad
windowrule = float true, match:class yad
# 作用：让匹配窗口以浮动模式打开；条件：match:class zenity
windowrule = float true, match:class zenity
# 作用：让匹配窗口以浮动模式打开；条件：match:class wev
windowrule = float true, match:class wev
# 作用：让匹配窗口以浮动模式打开；条件：match:class org\.gnome\.FileRoller
windowrule = float true, match:class org\.gnome\.FileRoller
# 作用：让匹配窗口以浮动模式打开；条件：match:class file-roller
windowrule = float true, match:class file-roller  # WHY IS THERE TWOOOOOOOOOOOOOOOO
# 作用：让匹配窗口以浮动模式打开；条件：match:class blueman-manager
windowrule = float true, match:class blueman-manager
# 作用：让匹配窗口以浮动模式打开；条件：match:class com\.github\.GradienceTeam\.Gradience
windowrule = float true, match:class com\.github\.GradienceTeam\.Gradience
# 作用：让匹配窗口以浮动模式打开；条件：match:class feh
windowrule = float true, match:class feh
# 作用：让匹配窗口以浮动模式打开；条件：match:class imv
windowrule = float true, match:class imv
# 作用：让匹配窗口以浮动模式打开；条件：match:class system-config-printer
windowrule = float true, match:class system-config-printer
# 作用：让匹配窗口以浮动模式打开；条件：match:class org\.quickshell
windowrule = float true, match:class org\.quickshell

# Float, resize and center
# 作用：让匹配窗口以浮动模式打开；条件：match:class foot, match:title nmtui
windowrule = float true, match:class foot, match:title nmtui
# 作用：设置匹配窗口初始尺寸为 `60% 70%`；条件：match:class foot, match:title nmtui
windowrule = size 60% 70%, match:class foot, match:title nmtui
# 作用：让匹配窗口创建后居中；条件：match:class foot, match:title nmtui
windowrule = center 1, match:class foot, match:title nmtui
# 作用：让匹配窗口以浮动模式打开；条件：match:class org\.gnome\.Settings
windowrule = float true, match:class org\.gnome\.Settings
# 作用：设置匹配窗口初始尺寸为 `70% 80%`；条件：match:class org\.gnome\.Settings
windowrule = size 70% 80%, match:class org\.gnome\.Settings
# 作用：让匹配窗口创建后居中；条件：match:class org\.gnome\.Settings
windowrule = center 1, match:class org\.gnome\.Settings
# 作用：让匹配窗口以浮动模式打开；条件：match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = float true, match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
# 作用：设置匹配窗口初始尺寸为 `60% 70%`；条件：match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = size 60% 70%, match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
# 作用：让匹配窗口创建后居中；条件：match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = center 1, match:class org\.pulseaudio\.pavucontrol|yad-icon-browser
# 作用：让匹配窗口以浮动模式打开；条件：match:class nwg-look
windowrule = float true, match:class nwg-look
# 作用：设置匹配窗口初始尺寸为 `50% 60%`；条件：match:class nwg-look
windowrule = size 50% 60%, match:class nwg-look
# 作用：让匹配窗口创建后居中；条件：match:class nwg-look
windowrule = center 1, match:class nwg-look

# Special workspaces
# 作用：将匹配窗口直接分配到 `special:sysmon`；条件：match:class btop
windowrule = workspace special:sysmon, match:class btop
# 作用：将匹配窗口直接分配到 `special:music`；条件：match:class feishin|Spotify|Supersonic|Cider|com.github.th_ch.youtube_music
windowrule = workspace special:music, match:class feishin|Spotify|Supersonic|Cider|com.github.th_ch.youtube_music
# 作用：将匹配窗口直接分配到 `special:music`；条件：match:initial_title Spotify( Free)?
windowrule = workspace special:music, match:initial_title Spotify( Free)?  # Spotify wayland, it has no class for some reason
# 作用：将匹配窗口直接分配到 `special:communication`；条件：match:class discord|equibop|vesktop|whatsapp
windowrule = workspace special:communication, match:class discord|equibop|vesktop|whatsapp
# 作用：将匹配窗口直接分配到 `special:todo`；条件：match:class Todoist
windowrule = workspace special:todo, match:class Todoist

# Dialogs
# 作用：让匹配窗口以浮动模式打开；条件：match:title (Select|Open)( a)? (File|Folder)(s)?
windowrule = float true, match:title (Select|Open)( a)? (File|Folder)(s)?
# 作用：让匹配窗口以浮动模式打开；条件：match:title File (Operation|Upload)( Progress)?
windowrule = float true, match:title File (Operation|Upload)( Progress)?
# 作用：让匹配窗口以浮动模式打开；条件：match:title .* Properties
windowrule = float true, match:title .* Properties
# 作用：让匹配窗口以浮动模式打开；条件：match:title Export Image as PNG
windowrule = float true, match:title Export Image as PNG
# 作用：让匹配窗口以浮动模式打开；条件：match:title GIMP Crash Debug
windowrule = float true, match:title GIMP Crash Debug
# 作用：让匹配窗口以浮动模式打开；条件：match:title Save As
windowrule = float true, match:title Save As
# 作用：让匹配窗口以浮动模式打开；条件：match:title Library
windowrule = float true, match:title Library

# Picture in picture (resize and move done via script)
# 作用：设置匹配窗口初始位置，避免弹出位置突兀；条件：match:title Picture(-| )in(-| )[Pp]icture
windowrule = move 100%-w-2% 100%-w-3%, match:title Picture(-| )in(-| )[Pp]icture  # Initial move so window doesn't shoot across the screen from the center
# 作用：保持匹配窗口宽高比；条件：match:title Picture(-| )in(-| )[Pp]icture
windowrule = keep_aspect_ratio true, match:title Picture(-| )in(-| )[Pp]icture
# 作用：让匹配窗口以浮动模式打开；条件：match:title Picture(-| )in(-| )[Pp]icture
windowrule = float true, match:title Picture(-| )in(-| )[Pp]icture
# 作用：固定窗口到所有工作区可见；条件：match:title Picture(-| )in(-| )[Pp]icture
windowrule = pin true, match:title Picture(-| )in(-| )[Pp]icture

# Creative software
# 作用：强制匹配窗口不透明，避免双重透明导致发灰；条件：match:class krita|gimp|inkscape|darktable|resolve|kdenlive|shotcut|blender|godot
windowrule = opaque true, match:class krita|gimp|inkscape|darktable|resolve|kdenlive|shotcut|blender|godot

# Ueberzugpp
# 作用：让匹配窗口以浮动模式打开；条件：match:class ^(ueberzugpp_.*)$
windowrule = float true, match:class ^(ueberzugpp_.*)$
# 作用：窗口创建时不抢焦点；条件：match:class ^(ueberzugpp_.*)$
windowrule = no_initial_focus true, match:class ^(ueberzugpp_.*)$

# Steam
# 作用：覆盖匹配窗口圆角半径；条件：match:class steam
windowrule = rounding 10, match:class steam
# 作用：让匹配窗口以浮动模式打开；条件：match:title Friends List, match:class steam
windowrule = float true, match:title Friends List, match:class steam

# Games (Steam, Lutris/Wine, Gamescope)
# 作用：强制匹配窗口不透明，避免双重透明导致发灰；条件：match:class (steam_app_(default|[0-9]+)|gamescope
windowrule = opaque true, match:class (steam_app_(default|[0-9]+)|gamescope
# 作用：开启立即提交，降低延迟（通常用于游戏）; 条件：match:class (steam_app_(default|[0-9]+)|gamescope
windowrule = immediate true, match:class (steam_app_(default|[0-9]+)|gamescope  # Allow tearing for games
# 作用：匹配窗口存在时始终抑制空闲休眠；条件：match:class (steam_app_(default|[0-9]+)|gamescope
windowrule = idle_inhibit always, match:class (steam_app_(default|[0-9]+)|gamescope  # Always idle inhibit when playing a game

# Minecraft launcher consoles
# 作用：让匹配窗口以浮动模式打开；条件：match:class com-atlauncher-App, match:title ATLauncher Console
windowrule = float true, match:class com-atlauncher-App, match:title ATLauncher Console
# 作用：让匹配窗口以浮动模式打开；条件：match:class PandoraLauncher, match:title Minecraft Game Output
windowrule = float true, match:class PandoraLauncher, match:title Minecraft Game Output

# Autodesk Fusion 360
# 作用：禁用匹配窗口背景模糊；条件：match:title Fusion360|(Marking Menu), match:class fusion360\.exe
windowrule = no_blur true, match:title Fusion360|(Marking Menu), match:class fusion360\.exe

# Ugh xwayland popups
# 作用：禁用匹配窗口周围调暗效果；条件：match:xwayland 1, match:title win[0-9]+
windowrule = no_dim true, match:xwayland 1, match:title win[0-9]+
# 作用：禁用匹配窗口阴影；条件：match:xwayland 1, match:title win[0-9]+
windowrule = no_shadow true, match:xwayland 1, match:title win[0-9]+
# 作用：覆盖匹配窗口圆角半径；条件：match:xwayland 1, match:title win[0-9]+
windowrule = rounding 10, match:xwayland 1, match:title win[0-9]+

# ######## Workspace rules ########
# 作用：为符合规则的工作区设置布局参数：`w[tv1]s[false], gapsout:$singleWindowGapsOut`
workspace = w[tv1]s[false], gapsout:$singleWindowGapsOut
# 作用：为符合规则的工作区设置布局参数：`f[1]s[false], gapsout:$singleWindowGapsOut`
workspace = f[1]s[false], gapsout:$singleWindowGapsOut

# ######## Layer rules ########
# 作用：为匹配图层设置动画 `fade`；条件：match:namespace hyprpicker
layerrule = animation fade, match:namespace hyprpicker  # Colour picker out animation
# 作用：为匹配图层设置动画 `fade`；条件：match:namespace logout_dialog
layerrule = animation fade, match:namespace logout_dialog  # wlogout
# 作用：为匹配图层设置动画 `fade`；条件：match:namespace selection
layerrule = animation fade, match:namespace selection  # slurp
# 作用：为匹配图层设置动画 `fade`；条件：match:namespace wayfreeze
layerrule = animation fade, match:namespace wayfreeze

# Fuzzel
# 作用：为匹配图层设置动画 `popin 80%`；条件：match:namespace launcher
layerrule = animation popin 80%, match:namespace launcher
# 作用：为匹配图层启用模糊；条件：match:namespace launcher
layerrule = blur true, match:namespace launcher

# Shell
# 作用：禁用匹配图层动画；条件：match:namespace caelestia-(border-exclusion|area-picker)
layerrule = no_anim true, match:namespace caelestia-(border-exclusion|area-picker)
# 作用：为匹配图层设置动画 `fade`；条件：match:namespace caelestia-(drawers|background)
layerrule = animation fade, match:namespace caelestia-(drawers|background)

# 作用：为匹配图层启用模糊；条件：match:namespace caelestia-drawers
layerrule = blur true, match:namespace caelestia-drawers
# 作用：在图层透明度低于阈值时忽略像素，提升观感；条件：match:namespace caelestia-drawers
layerrule = ignore_alpha 0.57, match:namespace caelestia-drawers
