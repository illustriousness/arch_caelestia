# 作用：切换到 `global` 子映射，确保全局快捷键生效
exec = hyprctl dispatch submap global
# 作用：切换到指定快捷键子映射
submap = global

# ## Shell keybinds
# Launcher
# 作用：Super+Super_L：触发 Caelestia 启动器
bindi = Super, Super_L, global, caelestia:launcher
# 作用：Super+catchall：中断启动器手势，避免误触持续弹出
bindin = Super, catchall, global, caelestia:launcherInterrupt
# 作用：Super+mouse:272：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:272, global, caelestia:launcherInterrupt
# 作用：Super+mouse:273：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:273, global, caelestia:launcherInterrupt
# 作用：Super+mouse:274：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:274, global, caelestia:launcherInterrupt
# 作用：Super+mouse:275：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:275, global, caelestia:launcherInterrupt
# 作用：Super+mouse:276：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:276, global, caelestia:launcherInterrupt
# 作用：Super+mouse:277：中断启动器手势，避免误触持续弹出
bindin = Super, mouse:277, global, caelestia:launcherInterrupt
# 作用：Super+mouse_up：中断启动器手势，避免误触持续弹出
bindin = Super, mouse_up, global, caelestia:launcherInterrupt
# 作用：Super+mouse_down：中断启动器手势，避免误触持续弹出
bindin = Super, mouse_down, global, caelestia:launcherInterrupt

# Misc
# 作用：$kbSession：打开会话菜单（关机/重启/注销等）
bind = $kbSession, global, caelestia:session
# 作用：$kbClearNotifs：清空通知中心
bindl = $kbClearNotifs, global, caelestia:clearNotifs
# 作用：$kbShowPanels：显示或切换所有 shell 面板
bind = $kbShowPanels, global, caelestia:showall
# 作用：$kbLock：触发锁屏
bind = $kbLock, global, caelestia:lock

# Restore lock
# 作用：$kbRestoreLock：后台启动 Caelestia shell
bindl = $kbRestoreLock, exec, caelestia shell -d
# 作用：$kbRestoreLock：触发锁屏
bindl = $kbRestoreLock, global, caelestia:lock

# Brightness
# 作用：XF86MonBrightnessUp：提高屏幕亮度
bindl = , XF86MonBrightnessUp, global, caelestia:brightnessUp
# 作用：XF86MonBrightnessDown：降低屏幕亮度
bindl = , XF86MonBrightnessDown, global, caelestia:brightnessDown

# Media
# 作用：Ctrl+Super+Space：播放/暂停媒体
bindl = Ctrl+Super, Space, global, caelestia:mediaToggle
# 作用：XF86AudioPlay：播放/暂停媒体
bindl = , XF86AudioPlay, global, caelestia:mediaToggle
# 作用：XF86AudioPause：播放/暂停媒体
bindl = , XF86AudioPause, global, caelestia:mediaToggle
# 作用：Ctrl+Super+Equal：切到下一首媒体
bindl = Ctrl+Super, Equal, global, caelestia:mediaNext
# 作用：XF86AudioNext：切到下一首媒体
bindl = , XF86AudioNext, global, caelestia:mediaNext
# 作用：Ctrl+Super+Minus：切到上一首媒体
bindl = Ctrl+Super, Minus, global, caelestia:mediaPrev
# 作用：XF86AudioPrev：切到上一首媒体
bindl = , XF86AudioPrev, global, caelestia:mediaPrev
# 作用：XF86AudioStop：停止媒体播放
bindl = , XF86AudioStop, global, caelestia:mediaStop

# Kill/restart
# 作用：Ctrl+Super+Shift+R：结束正在运行的 shell 实例
bindr = Ctrl+Super+Shift, R, exec, qs -c caelestia kill
# 作用：Ctrl+Super+Alt+R：重启 shell：先杀进程，再拉起新实例
bindr = Ctrl+Super+Alt, R, exec, qs -c caelestia kill; sleep .1; caelestia shell -d

# Go to workspace #
# 作用：定义工作区操作脚本路径，供后续快捷键复用
$wsaction = ~/.config/hypr/scripts/wsaction.fish
# 作用：$kbGoToWs+1：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 1, exec, $wsaction workspace 1
# 作用：$kbGoToWs+2：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 2, exec, $wsaction workspace 2
# 作用：$kbGoToWs+3：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 3, exec, $wsaction workspace 3
# 作用：$kbGoToWs+4：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 4, exec, $wsaction workspace 4
# 作用：$kbGoToWs+5：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 5, exec, $wsaction workspace 5
# 作用：$kbGoToWs+6：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 6, exec, $wsaction workspace 6
# 作用：$kbGoToWs+7：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 7, exec, $wsaction workspace 7
# 作用：$kbGoToWs+8：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 8, exec, $wsaction workspace 8
# 作用：$kbGoToWs+9：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 9, exec, $wsaction workspace 9
# 作用：$kbGoToWs+0：调用 wsaction 脚本切换工作区
bind = $kbGoToWs, 0, exec, $wsaction workspace 10
# Go to workspace group #
# 作用：$kbGoToWsGroup+1：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 1, exec, $wsaction -g workspace 1
# 作用：$kbGoToWsGroup+2：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 2, exec, $wsaction -g workspace 2
# 作用：$kbGoToWsGroup+3：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 3, exec, $wsaction -g workspace 3
# 作用：$kbGoToWsGroup+4：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 4, exec, $wsaction -g workspace 4
# 作用：$kbGoToWsGroup+5：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 5, exec, $wsaction -g workspace 5
# 作用：$kbGoToWsGroup+6：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 6, exec, $wsaction -g workspace 6
# 作用：$kbGoToWsGroup+7：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 7, exec, $wsaction -g workspace 7
# 作用：$kbGoToWsGroup+8：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 8, exec, $wsaction -g workspace 8
# 作用：$kbGoToWsGroup+9：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 9, exec, $wsaction -g workspace 9
# 作用：$kbGoToWsGroup+0：调用 wsaction 切换工作区分组
bind = $kbGoToWsGroup, 0, exec, $wsaction -g workspace 10
# Go to workspace -1/+1
# 作用：Super+mouse_down：切到上一个工作区
bind = Super, mouse_down, workspace, -1
# 作用：Super+mouse_up：切到下一个工作区
bind = Super, mouse_up, workspace, +1
# 作用：$kbPrevWs：切到上一个工作区
binde = $kbPrevWs, workspace, -1
# 作用：$kbNextWs：切到下一个工作区
binde = $kbNextWs, workspace, +1
# 作用：Super+Page_Up：切到上一个工作区
binde = Super, Page_Up, workspace, -1
# 作用：Super+Page_Down：切到下一个工作区
binde = Super, Page_Down, workspace, +1
# Go to workspace group -1/+1
# 作用：Ctrl+Super+mouse_down：切到上一个工作区分组
bind = Ctrl+Super, mouse_down, workspace, -10
# 作用：Ctrl+Super+mouse_up：切到下一个工作区分组
bind = Ctrl+Super, mouse_up, workspace, +10
# Toggle special workspace
# 作用：$kbToggleSpecialWs：切换 special 工作区显示
bind = $kbToggleSpecialWs, exec, caelestia toggle specialws

# Move window to workspace #
# 作用：$kbMoveWinToWs+1：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 1, exec, $wsaction movetoworkspace 1
# 作用：$kbMoveWinToWs+2：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 2, exec, $wsaction movetoworkspace 2
# 作用：$kbMoveWinToWs+3：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 3, exec, $wsaction movetoworkspace 3
# 作用：$kbMoveWinToWs+4：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 4, exec, $wsaction movetoworkspace 4
# 作用：$kbMoveWinToWs+5：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 5, exec, $wsaction movetoworkspace 5
# 作用：$kbMoveWinToWs+6：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 6, exec, $wsaction movetoworkspace 6
# 作用：$kbMoveWinToWs+7：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 7, exec, $wsaction movetoworkspace 7
# 作用：$kbMoveWinToWs+8：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 8, exec, $wsaction movetoworkspace 8
# 作用：$kbMoveWinToWs+9：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 9, exec, $wsaction movetoworkspace 9
# 作用：$kbMoveWinToWs+0：调用 wsaction 将当前窗口移动到目标工作区
bind = $kbMoveWinToWs, 0, exec, $wsaction movetoworkspace 10
# Move window to workspace group #
# 作用：$kbMoveWinToWsGroup+1：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 1, exec, $wsaction -g movetoworkspace 1
# 作用：$kbMoveWinToWsGroup+2：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 2, exec, $wsaction -g movetoworkspace 2
# 作用：$kbMoveWinToWsGroup+3：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 3, exec, $wsaction -g movetoworkspace 3
# 作用：$kbMoveWinToWsGroup+4：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 4, exec, $wsaction -g movetoworkspace 4
# 作用：$kbMoveWinToWsGroup+5：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 5, exec, $wsaction -g movetoworkspace 5
# 作用：$kbMoveWinToWsGroup+6：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 6, exec, $wsaction -g movetoworkspace 6
# 作用：$kbMoveWinToWsGroup+7：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 7, exec, $wsaction -g movetoworkspace 7
# 作用：$kbMoveWinToWsGroup+8：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 8, exec, $wsaction -g movetoworkspace 8
# 作用：$kbMoveWinToWsGroup+9：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 9, exec, $wsaction -g movetoworkspace 9
# 作用：$kbMoveWinToWsGroup+0：调用 wsaction 将窗口移动到目标工作区分组
bind = $kbMoveWinToWsGroup, 0, exec, $wsaction -g movetoworkspace 10
# Move window to workspace -1/+1
# 作用：Super+Alt+Page_Up：把窗口移到上一个工作区
binde = Super+Alt, Page_Up, movetoworkspace, -1
# 作用：Super+Alt+Page_Down：把窗口移到下一个工作区
binde = Super+Alt, Page_Down, movetoworkspace, +1
# 作用：Super+Alt+mouse_down：把窗口移到上一个工作区
bind = Super+Alt, mouse_down, movetoworkspace, -1
# 作用：Super+Alt+mouse_up：把窗口移到下一个工作区
bind = Super+Alt, mouse_up, movetoworkspace, +1
# 作用：Ctrl+Super+Shift+right：把窗口移到下一个工作区
binde = Ctrl+Super+Shift, right, movetoworkspace, +1
# 作用：Ctrl+Super+Shift+left：把窗口移到上一个工作区
binde = Ctrl+Super+Shift, left, movetoworkspace, -1
# Move window to/from special workspace
# 作用：Ctrl+Super+Shift+up：把窗口移到 special 工作区
bind = Ctrl+Super+Shift, up, movetoworkspace, special:special
# 作用：Ctrl+Super+Shift+down：把窗口移回当前普通工作区（退出 special workspace）
bind = Ctrl+Super+Shift, down, movetoworkspace, e+0
# 作用：Super+Alt+S：把窗口移到 special 工作区
bind = Super+Alt, S, movetoworkspace, special:special

# Window groups
# 作用：$kbWindowGroupCycleNext：在分组窗口中向后切换
binde = $kbWindowGroupCycleNext, cyclenext
# 作用：$kbWindowGroupCyclePrev：在分组窗口中向前切换
binde = $kbWindowGroupCyclePrev, cyclenext, prev
# 作用：Ctrl+Alt+Tab：在分组内切换到下一个
binde = Ctrl+Alt, Tab, changegroupactive, f
# 作用：Ctrl+Shift+Alt+Tab：在分组内切换到上一个
binde = Ctrl+Shift+Alt, Tab, changegroupactive, b
# 作用：$kbToggleGroup：将当前窗口加入/退出分组
bind = $kbToggleGroup, togglegroup
# 作用：$kbUngroup：将当前窗口移出分组
bind = $kbUngroup, moveoutofgroup
# 作用：Super+Shift+Comma：锁定或解锁当前分组
bind = Super+Shift, Comma, lockactivegroup, toggle

# Window actions
# 作用：Super+left：把焦点移动到 `l` 方向窗口
bind = Super, left, movefocus, l
# 作用：Super+right：把焦点移动到 `r` 方向窗口
bind = Super, right, movefocus, r
# 作用：Super+up：把焦点移动到 `u` 方向窗口
bind = Super, up, movefocus, u
# 作用：Super+down：把焦点移动到 `d` 方向窗口
bind = Super, down, movefocus, d
# 作用：Super+Shift+left：把窗口移动到 `l` 方向
bind = Super+Shift, left, movewindow, l
# 作用：Super+Shift+right：把窗口移动到 `r` 方向
bind = Super+Shift, right, movewindow, r
# 作用：Super+Shift+up：把窗口移动到 `u` 方向
bind = Super+Shift, up, movewindow, u
# 作用：Super+Shift+down：把窗口移动到 `d` 方向
bind = Super+Shift, down, movewindow, d
# 作用：Super+Minus：调整分割比例 `-0.1`
binde = Super, Minus, splitratio, -0.1
# 作用：Super+Equal：调整分割比例 `0.1`
binde = Super, Equal, splitratio, 0.1
# 作用：Super+鼠标左键拖动：移动当前窗口位置
bindm = Super, mouse:272, movewindow
# 作用：$kbMoveWindow：按变量定义的拖动手势移动窗口
bindm = $kbMoveWindow, movewindow
# 作用：Super+鼠标右键拖动：调整当前窗口尺寸
bindm = Super, mouse:273, resizewindow
# 作用：$kbResizeWindow：按变量定义的拖动手势调整窗口尺寸
bindm = $kbResizeWindow, resizewindow
# 作用：Ctrl+Super+Backslash：将当前窗口居中
bind = Ctrl+Super, Backslash, centerwindow, 1
# 作用：Ctrl+Super+Alt+Backslash：按给定尺寸调整当前窗口
bind = Ctrl+Super+Alt, Backslash, resizeactive, exact 55% 70%
# 作用：Ctrl+Super+Alt+Backslash：将当前窗口居中
bind = Ctrl+Super+Alt, Backslash, centerwindow, 1
# 作用：$kbWindowPip：将当前窗口调整为画中画位置与尺寸
bind = $kbWindowPip, exec, caelestia resizer pip  # Move window to picture-in-picture mode
# 作用：$kbPinWindow：固定窗口（跨工作区可见）
bind = $kbPinWindow, pin
# 作用：$kbWindowFullscreen：切换普通全屏
bind = $kbWindowFullscreen, fullscreen, 0
# 作用：$kbWindowBorderedFullscreen：切换带边框全屏
bind = $kbWindowBorderedFullscreen, fullscreen, 1  # Fullscreen with borders
# 作用：$kbToggleWindowFloating：在浮动/平铺之间切换
bind = $kbToggleWindowFloating, togglefloating,
# 作用：$kbCloseWindow：关闭当前活动窗口
bind = $kbCloseWindow, killactive,

# Special workspace toggles
# 作用：$kbSystemMonitor：切换系统监控 special 工作区
bind = $kbSystemMonitor, exec, caelestia toggle sysmon
# 作用：$kbMusic：切换音乐 special 工作区
bind = $kbMusic, exec, caelestia toggle music
# 作用：$kbCommunication：切换通讯 special 工作区
bind = $kbCommunication, exec, caelestia toggle communication
# 作用：$kbTodo：切换待办 special 工作区
bind = $kbTodo, exec, caelestia toggle todo

# Apps
# 作用：$kbTerminal：通过 app2unit 启动终端，并纳入 systemd 会话管理
bind = $kbTerminal, exec, app2unit -- $terminal
# 作用：$kbBrowser：通过 app2unit 启动浏览器，并纳入 systemd 会话管理
bind = $kbBrowser, exec, app2unit -- $browser
# 作用：$kbEditor：通过 app2unit 启动编辑器，并纳入 systemd 会话管理
bind = $kbEditor, exec, app2unit -- $editor
# 作用：Super+G：通过 app2unit 启动 GitHub Desktop
bind = Super, G, exec, app2unit -- github-desktop
# 作用：$kbFileExplorer：通过 app2unit 启动文件管理器
bind = $kbFileExplorer, exec, app2unit -- $fileExplorer
# 作用：Super+Alt+E：通过 app2unit 启动 Nemo 文件管理器
bind = Super+Alt, E, exec, app2unit -- nemo
# 作用：Ctrl+Alt+Escape：通过 app2unit 启动进程查看器 qps
bind = Ctrl+Alt, Escape, exec, app2unit -- qps
# 作用：Ctrl+Alt+V：通过 app2unit 启动音量控制 pavucontrol
bind = Ctrl+Alt, V, exec, app2unit -- pavucontrol

# Utilities
# 作用：Print：整屏截图并写入剪贴板
bindl = , Print, exec, caelestia screenshot  # Full screen capture > clipboard
# 作用：Super+Shift+S：冻结画面后截图，便于精确选区
bind = Super+Shift, S, global, caelestia:screenshotFreeze  # Capture region (freeze)
# 作用：Super+Shift+Alt+S：触发区域截图
bind = Super+Shift+Alt, S, global, caelestia:screenshot  # Capture region
# 作用：Super+Alt+R：录制屏幕并包含系统音频
bind = Super+Alt, R, exec, caelestia record -s  # Record screen with sound
# 作用：Ctrl+Alt+R：开始/停止屏幕录制
bind = Ctrl+Alt, R, exec, caelestia record  # Record screen
# 作用：Super+Shift+Alt+R：录制选定区域
bind = Super+Shift+Alt, R, exec, caelestia record -r  # Record region
# 作用：Super+Shift+C：取色并自动复制颜色值
bind = Super+Shift, C, exec, hyprpicker -a  # Colour picker

# Volume
# 作用：XF86AudioMicMute：切换麦克风静音
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
# 作用：XF86AudioMute：切换扬声器静音
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# 作用：Super+Shift+M：切换扬声器静音
bindl = Super+Shift, M, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# 作用：XF86AudioRaiseVolume：取消静音并提高输出音量
bindle = , XF86AudioRaiseVolume, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0; wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ $volumeStep%+
# 作用：XF86AudioLowerVolume：取消静音并降低输出音量
bindle = , XF86AudioLowerVolume, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0; wpctl set-volume @DEFAULT_AUDIO_SINK@ $volumeStep%-

# Sleep
# 作用：Super+Shift+L：先挂起再休眠，兼顾快速恢复与省电
bind = Super+Shift, L, exec, systemctl suspend-then-hibernate

# Clipboard and emoji picker
# 作用：Super+V：若 fuzzel 已开则关闭，否则打开剪贴板历史
bind = Super, V, exec, pkill fuzzel || caelestia clipboard
# 作用：Super+Alt+V：打开带删除能力的剪贴板历史界面
bind = Super+Alt, V, exec, pkill fuzzel || caelestia clipboard -d
# 作用：Super+Period：打开 emoji 选择器
bind = Super, Period, exec, pkill fuzzel || caelestia emoji -p
# 作用：Ctrl+Shift+Alt+V：延迟后将最新剪贴板内容模拟键入（备用粘贴方案）
bindl = Ctrl+Shift+Alt, V, exec, sleep 0.5s && ydotool type -d 1 "$(cliphist list | head -1 | cliphist decode)"  # Alternate paste

# Testing
# 作用：Super+Alt+f12：发送测试通知，检查通知样式和交互
bindl = Super+Alt, f12, exec, notify-send -u low -i dialog-information-symbolic 'Test notification' "Here's a really long message to test truncation and wrapping\nYou can middle click or flick this notification to dismiss it!" -a 'Shell' -A "Test1=I got it!" -A "Test2=Another action"
